!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.eventDrops=e(require("d3")):t.eventDrops=e(t.d3)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(13),t.exports=n(17)},function(e,n){e.exports=t},function(t,e){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],e=arguments[1],n=e.domain(),a=r(n,2),o=a[0],l=a[1];return t.filter(function(t){return t.date>=o&&t.date<=l})}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&i["return"]&&i["return"]()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n){var r=e.tickFormat.map(function(t){return t.slice(0)}),a=e.locale?e.locale.timeFormat.multi(r):o["default"].time.format.multi(r),l=o["default"].svg.axis().scale(t).orient(n).tickFormat(a);return"function"==typeof e.axisFormat&&e.axisFormat(l),l};var a=n(1),o=r(a)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=n(1),o=r(a),l={lineHeight:45,start:new Date(0),end:new Date,minScale:0,maxScale:1/0,width:1200,margin:{top:100,left:190,bottom:10,right:50},locale:null,axisFormat:null,tickFormat:[[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!==t.getDate()}],["%b %d",function(t){return 1!==t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]],eventHover:null,eventZoom:null,eventClick:null,hasDelimiter:!0,hasTopAxis:!1,hasBottomAxis:!0,eventLineColor:"black",eventColor:null,eventShape:"ï„‘",eventTooltip:null,metaballs:!1,zoomable:!0,marker:!0,brushZoom:!0};l.dateFormat=l.locale?l.locale.timeFormat("%x %I:%M %p"):o["default"].time.format("%x %I:%M %p"),t.exports=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=r(a),l=(n(12),function(t,e){return"function"==typeof t?t(e):t});e["default"]=function(t,e,n,r){return function(a){var i=function(a){var l=t.selectAll(".x-axis."+a).data([{}]);l.enter().append("g").classed("x-axis",!0).classed(a,!0).call(o["default"](e.x,n,a)).attr("transform","translate(0,"+("bottom"===a?r.height+5:0)+")"),l.call(o["default"](e.x,n,a)),l.exit().remove()};l(n.hasTopAxis,a)&&i("top"),l(n.hasBottomAxis,a)&&i("bottom")}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.delimiters=function(t,e,n){var r=t.select(".extremum");r.selectAll(".minimum").remove(),r.selectAll(".maximum").remove();var a=e.x.domain();r.append("text").text(n(a[1])).classed("maximum",!0).attr("transform","translate("+e.x.range()[1]+")").attr("text-anchor","end")}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n){return function(r){var a=t.selectAll(".drop-line").data(r);a.enter().append("g").classed("drop-line",!0).attr("transform",function(t,r){return"translate(0, "+(40+n.lineHeight+e.y(r))+")"}).attr("fill",n.eventLineColor),a.each(function(t){var r=d3.select(this).selectAll(".drop").data(t.data);r.attr("transform",function(t){return"translate("+(e.x(t.date)+200)+",-3)"});var a=r.enter().append("text").classed("drop",!0).attr("transform",function(t){return"translate("+(e.x(t.date)+200)+",-3)"}).attr("fill",n.eventColor).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("data-toggle","tooltip").attr("title",n.eventTooltip).text(n.eventShape);n.eventClick&&a.on("click",n.eventClick),n.eventHover&&a.on("mouseover",n.eventHover),r.exit().on("click",null).on("mouseover",null),r.exit().remove()}),a.exit().remove()}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=(r(a),n(6),n(2)),l=(r(o),n(14)),i=n(5),u=r(i),s=n(7),d=r(s),c=n(9),f=r(c),m=n(10),p=r(m),v=n(11),h=r(v);e["default"]=function(t,e,n,r){var a=t.append("defs");a.append("clipPath").attr("id","drops-container-clipper").append("rect").attr("id","drops-container-rect").attr("x",r.margin.left).attr("y",0).attr("width",e.width).attr("height",e.outer_height),a.append("pattern").attr("id","gridStripes").attr("width",e.width).attr("height",80).attr("patternUnits","userSpaceOnUse").append("rect").attr("width",e.width).attr("height",40).attr("fill","#fafafa");var o=t.append("g").classed("grid",!0).attr("transform","translate("+r.margin.left+", "+(r.margin.top-(r.lineHeight-5))+")"),i=t.append("g").classed("labels",!0).attr("transform","translate(0, 45)"),s=t.append("g").classed("axes",!0).attr("transform","translate("+r.margin.left+", 55)"),c=t.append("g").classed("drops-container",!0).attr("clip-path","url(#drops-container-clipper)").style("filter","url(#metaballs)"),m=t.append("g").classed("timestamp",!0).attr("width",e.width).attr("height",30).attr("transform","translate("+r.margin.left+", "+(r.margin.top-45)+")");r.metaballs&&l.metaballs(a);var v=(h["default"](o,m,n,e,r.dateFormat),p["default"](s,n,r,e)),x=u["default"](s,n,r,e),g=f["default"](i,n,r),y=d["default"](c,n,r);return function(t){v(t),y(t),g(t),x(t)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=r(a);e["default"]=function(t,e,n){return function(n){var r=t.selectAll(".label").data(n),a=function(t){var n=o["default"](t.data,e.x).length;return t.name+(n>0?" ("+n+")":"")};r.text(a),r.enter().append("text").classed("label",!0).attr("x",180).attr("transform",function(t,n){return"translate(0, "+(40+e.y(n))+")"}).attr("text-anchor","end").text(a),r.exit().remove()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n,r){return function(a){var o=t.selectAll(".line-separator").data(a);o.enter().append("g").classed("line-separator",!0).attr("transform",function(t,r){return"translate(0, "+(e.y(r)+n.lineHeight)+")"}).append("line").attr("x1",0).attr("x2",r.width),o.exit().remove()}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=r(a);e["default"]=function(t,e,n,r,a){function l(){s.empty()||(console.log(n.x.domain()),console.log(s.extent()),n.x.domain(s.extent()))}function i(){var e=o["default"].mouse(t[0][0])[0];u.attr("transform","translate("+e+")"),c.attr("transform","translate("+(e-65)+", -20)"),f.attr("transform","translate("+e+", -4)").text(a(n.x.invert(e)))}t.append("rect").attr("width",r.width).attr("height",r.height-1).attr("fill","url(#gridStripes)").on("mouseover",function(){u.style("display",null),f.style("display",null),c.style("display",null)}).on("mouseout",function(){u.style("display","none"),f.style("display","none"),c.style("display","none")}).on("mousemove",i);var u=t.append("line").classed("marker",!0).attr("y1",0).attr("y2",r.height),s=o["default"].svg.brush().x(n.x).on("brushend",l),d=n.x.domain(),c=e.append("rect").attr("height","24").attr("width","130").style("display","none"),f=e.append("text").text(a(d[1])).attr("transform","translate("+n.x.range()[1]+")").attr("text-anchor","middle")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.drawBottomAxis=e.drawTopAxis=void 0;var a=n(3),o=r(a),l=function(t,e,n,r,a){t.append("g").classed("x-axis",!0).classed(r,!0).attr("transform","translate("+n.margin.left+", "+a+")").call(o["default"](e,n,r))};e.drawTopAxis=function(t,e,n,r){return l(t,e,n,"top",n.margin.top-40)},e.drawBottomAxis=function(t,e,n,r){return l(t,e,n,"bottom",+r.height-21)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(){function t(t){t.each(function(e){i["default"].select(this).select(".event-drops-chart").remove();var o=40*e.length,l={width:n.width-n.margin.right-n.margin.left,height:o,outer_height:o+n.margin.top+n.margin.bottom},u={x:a(l.width,[n.start,new Date(n.end.getTime()+252e5)]),y:r(e)},s=i["default"].select(this).append("svg").classed("event-drops-chart",!0).attr({width:n.width,height:l.outer_height}),d=m["default"](s,l,u,n).bind(t);d(e),n.zoomable&&v["default"](i["default"].select(this),l,u,n,e,d)})}var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=o({},c["default"],e),r=function(t){var e=i["default"].scale.ordinal();return e.domain(t.map(function(t){return t.name})).range(t.map(function(t,e){return 40*e}))},a=function(t,e){return i["default"].time.scale().range([0,t]).domain(e)};return s["default"](t,n),t}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=n(1),i=r(l),u=n(16),s=r(u),d=n(4),c=r(d),f=n(8),m=r(f),p=n(15),v=r(p);i["default"].chart=i["default"].chart||{},i["default"].chart.eventDrops=a,t.exports=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.metaballs=function(t){var e=t.append("filter");return e.attr("id","metaballs"),e.append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",10).attr("result","blur"),e.append("feColorMatrix").attr("in","blur").attr("mode","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -10").attr("result","contrast"),e.append("feBlend").attr("in","SourceGraphic").attr("in2","contrast"),e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=r(a);e["default"]=function(t,e,n,r,a,l){function i(t){var n=[e.width/2,e.height/2],r=(c.scaleExtent(),c.translate()),a=[],l=[],i={x:r[0],y:r[1],k:c.scale()};o["default"].event.preventDefault(),a=[(n[0]-i.x)/i.k,(n[1]-i.y)/i.k],i.k=o["default"].select(this).property("value"),l=[a[0]*i.k+i.x,a[1]*i.k+i.y],i.x+=n[0]-l[0],i.y+=n[1]-l[1],console.log(i.x+" "+i.y+" "+i.k),u([i.x,i.y],i.k,0)}function u(e,n,r){return o["default"].transition().duration(r).tween("zoom",function(){var r=o["default"].interpolate(c.translate(),e),a=o["default"].interpolate(c.scale(),n);return function(e){c.scale(a(e)).translate(r(e)),c.event(t)}})}function s(){var t=arguments.length<=0||void 0===arguments[0]?.5:arguments[0],n=(o["default"].event.target,1),r=1,a=[e.width/2,e.height/2],l=c.scaleExtent(),i=c.translate(),s=[],d=[],f={x:i[0],y:i[1],k:c.scale()};return o["default"].event.preventDefault(),n="zoom_in"===this.id?1:-1,r=c.scale()*(1+t*n),r<l[0]||r>l[1]?!1:(s=[(a[0]-f.x)/f.k,(a[1]-f.y)/f.k],f.k=r,d=[s[0]*f.k+f.x,s[1]*f.k+f.y],f.x+=a[0]-d[0],f.y+=a[1]-d[1],void u([f.x,f.y],f.k,100))}var d=(o["default"].selectAll(".zoombutton").on("click",s),o["default"].selectAll("#slider").attr("value",1).attr("min",1).attr("max",100).attr("step",.5).on("input",i)),c=o["default"].behavior.zoom().size([e.width,e.height]).scaleExtent([r.minScale,r.maxScale]).x(n.x).on("zoom",function(){requestAnimationFrame(function(){return l(a)}),d.property("value",c.scale())});return r.eventZoom&&c.on("zoomend",r.eventZoom),r.brushZoom?t.call(c).on("dblclick.zoom",null).on("mousemove",function(){var e=o["default"].mouse(t[0][0]),n=[e[0]-205,e[1]];c.center(n)}).on("mousedown.zoom",null):t.call(c).on("dblclick.zoom",null).on("mousemove",function(){var e=o["default"].mouse(t[0][0]),n=[e[0]-205,e[1]];c.center(n)})}},function(t,e,n){"use strict";function r(t,e){function n(n){return function(r){return arguments.length?(e[n]=r,t):e[n]}}for(var r in e)t[r]=n(r)}t.exports=r},function(t,e){}])});
//# sourceMappingURL=eventDrops.js.map